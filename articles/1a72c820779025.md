---
title: "Ryzen 7735HSãªThinkPadã‚’ollama serverã«ã™ã‚‹"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["windows", "ai", "ollama", "ãƒ­ãƒ¼ã‚«ãƒ«llm"]
published: true
---

## ã‚„ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨

- thinkpad (32GB RAM)ã§ollamaå‹•ä½œ
- macbookã‹ã‚‰ãã‚Œã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦aiä½¿ç”¨

## ollamaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

https://ollama.com

ã‹ã‚‰windowså‘ã‘ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚ä»Šå›å…¥ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã¯ä»¥ä¸‹ã®4ã¤ã€‚RAMã¯32ã‚ã‚‹ã®ã§ã¡ã‚‡ã£ã¨å¤§ãã‚ã®ãƒ¢ãƒ‡ãƒ«ã‚‚å…¥ã‚Œã¾ã—ãŸã€‚

- gemma3:4b
- gemma3:12b
- deepseek-r1:8b
- nomic-embed-text:latest

```powershell
ollama pull gemma3:4b
ollama pull gemma3:12b
ollama pull deepseek-r1:8b
ollama pull nomic-embed-text
```

## portã¨ã‹ã®è§£æ”¾

ã“ã®ã¾ã¾ã ã¨windowsãŒfirewallã§å¼¾ã„ã¦ã—ã¾ã†ã®ã§ã€ãƒãƒ¼ãƒˆã‚’è§£æ”¾ã—ã¾ã™ã€‚(linuxãªã‚‰ufwã§ä¸€ç™ºãªã®ã«)

ã‚‚ã—ã€defenderã§ã¯ãªãä»–ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä½¿ã£ã¦ã‚‹å ´åˆã¯ã€ãã®ã‚½ãƒ•ãƒˆã®è¨­å®šã§ãƒãƒ¼ãƒˆã‚’è§£æ”¾ã—ã¦ãã ã•ã„ã€‚

windows defenderã®å·¦ã®ãƒšã‚¤ãƒ³ã‹ã‚‰ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¼ã‚¦ã‚©ãƒ¼ãƒ«ã®é …ç›®ã€ä¸‹ã®æ–¹ã«ã‚ã‚‹è©³ç´°è¨­å®šã‚’é–‹ãã€‚å³ä¸Šã‚ãŸã‚Šã®ãƒ«ãƒ¼ãƒ«ã®è¿½åŠ ã‚’æŠ¼ã—ã¦ã€11434[^1]ã‚’è¨±å¯ã—ã¾ã™ã€‚

ã‚ã¨ã€ãªã‚“ã‹ollamaå´ã§ã‚‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¶Šã—ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã‚‹ãŸã‚(?)ã«è¨­å®šãŒå¿…è¦ã‚‰ã—ãä»¥ä¸‹ã§ã™ã€‚

```powershell
sudo setx OLLAMA_HOST "0.0.0.0:11434" /M
```

:::details pingã«ã¤ã„ã¦
ã¡ãªã¿ã«ãŠãã‚‰ããƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯pingã‚‚è¿”ã•ãªã„ã®ã§ã€å…ˆã»ã©ã®ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¼ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã§`File and Printer Sharing (Echo Request - ICMPv4-In)`ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®å…±æœ‰ã®(ãŠãã‚‰ãprivate)ã‚’è¨±å¯ã«ã™ã‚‹ã¨pingãŒé€šã‚‹ã¯ãš
:::

## macã‹ã‚‰æ¥ç¶šå¯èƒ½ã‹

ã¾ãšwindowsã®ipã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’èª¿ã¹ã¾ã™ã€‚ä»Šå›ã¯1.7ãªã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã§`Ollama is running%`ã¨è¿”ã£ã¦ãã‚Œã°æˆåŠŸã§ã™ã€‚ãƒ€ãƒ¡ãªã‚‰ã€windowsã®å†èµ·å‹•ãªã©ã€‚ã‚ã‚“ã¾è©³ã—ãçŸ¥ã‚‰ãªã„ã®ã§...

```zsh
$ curl http://192.168.1.7:11434
Ollama is running%
```


[^1]: ã“ã‚Œã¯ollamaã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã§ã™ãŒã€`llama`ã‚’æ•°å­—è¡¨ã™ã¨11AMA(Aã¨Mã‚’ãã‚Œãã‚Œæ¨ªã«)ã«ãªã‚‹ã‹ã‚‰ã ãã†ã§ã™ã€‚

## editorã§ã®è¨­å®š

### vscodeã®å ´åˆ

https://marketplace.visualstudio.com/items?itemName=Continue.continue

continueã¨ã„ã†æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€ollamaã«æ¥ç¶šã—ã¾ã™ã€‚ã—ã‹ã—ãã®ã¾ã¾ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ollamaã«ç¹‹ãŒã£ã¦ã—ã¾ã†ã®ã§ã€apiBaseã«å…ˆã»ã©ã®urlã¨ãƒãƒ¼ãƒˆã‚’å…¥ã‚Œã¾ã™ã€‚

:::message
ä»¥å‰ã€è¨­å®šã¯`~/.continue/config.json`ã ã£ãŸã®ã§ã™ãŒã€ç¾åœ¨ã¯yamlã«ãªã£ã¦`~/.continue/config.yaml`ã«ãªã£ã¦ã„ã‚‹ãã†ã€‚ç§ã¯ã“ã®æ©Ÿä¼šã«ç§»è¡Œã—ã¾ã—ãŸã€‚
:::

:::details yaml ver. config
```yaml
name: Server Assistant
version: 1.0.0
schema: v1
context:
  - provider: code
  - provider: docs
  - provider: diff
  - provider: terminal
  - provider: problems
  - provider: folder
  - provider: codebase

models:
  - model: gemma3:12b
    provider: ollama
    name: gemma3_12b
    apiBase: http://192.168.1.7:11434
  - model: deepseek-r1:8b
    provider: ollama
    name: deepseek_r1_8b
    apiBase: http://192.168.1.7:11434

contextProviders:
  - name: code
    params: {}
  - name: docs
    params: {}
  - name: diff
    params: {}
  - name: terminal
    params: {}
  - name: problems
    params: {}
  - name: folder
    params: {}
  - name: codebase
    params: {}

slashCommands:
  - name: share
    description: Export the current chat session to markdown
  - name: cmd
    description: Generate a shell command
  - name: commit
    description: Generate a git commit message

embeddingsProvider:
  provider: ollama
  model: nomic-embed-text

reranker:
  name: free-trial

# apiBase: http://localhost:11434/v1

customCommands:
  - name: test
    prompt: "{{{ input }}}\n\nWrite a comprehensive set of unit tests for the selected code. It should setup, run tests that check for correctness including important edge cases, and teardown. Ensure that the tests are complete and sophisticated. Give the tests just as chat output, don't edit any file."
    description: "This is an example custom command. Open config.json to edit it and create more"
  - name: doc
    description: "write a doc for code."
    prompt: "write a only doc comment. don't write a function code . i want to paste it as it is."

tabAutocompleteOptions:
  disable: false
```
:::

### zedã®å ´åˆ

zedã¯`~/.config/zed/config.json`ã«`language_models`ã¨ã„ã†é …ç›®ã‚’å…¥ã‚Œã‚Œã°å‹•ãã¾ã™ã€‚æœ€åˆã€`supports_tools`ã¨ã„ã†é …ç›®ã‚’è¨­å®šã—ã¦ã„ãŸã®ã§ã™ãŒã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã€chatGPTæ›°ãgemmaã¯ãƒ„ãƒ¼ãƒ«ã«å¯¾å¿œã—ã¦ãªã„ã‹ã‚‰ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã¨ã®ã“ã¨ã€‚

:::details ~/.config/zed/config.json
```json
// Zed settings
//
// For information on how to configure Zed, see the Zed
// documentation: https://zed.dev/docs/configuring-zed
//
// To see all of Zed's default settings without changing your
// custom settings, run `zed: open default settings` from the
// command palette (cmd-shift-p / ctrl-shift-p)
{
  // ~~~çœç•¥~~~
  "language_models": {
    "ollama": {
      "api_url": "http://192.168.1.7:11434",
      "available_models": [
        {
          "name": "gemma3:12b",
          "max_tokens": 32768,
          "display_name": "gemma3 12b"
        },
        {
          "name": "gemma3:4b",
          "max_tokens": 32768,
          "display_name": "gemma3 4b"
        }
      ]
    }
  }
}
```
:::

## ã¾ã¨ã‚

ã“ã‚Œã§16GB macbookã‚’è‹¦ã—ã‚ãšã«ãƒ­ãƒ¼ã‚«ãƒ«llmãŒã§ãã¾ã™ã€‚ã¾ã‚å®¶ã‹ã‚‰å‡ºã‚Œã°ä½¿ãˆã¾ã›ã‚“ãŒã€‚

ã‚ã¨ã€æ§‹ç¯‰ãŒæ¥½ã—ã‹ã£ãŸã ã‘ã§æ™®æ®µã‹ã‚‰ollamaä½¿ã£ã¦ã‚‹ã‚ã‘ã§ãªã„ã“ã¨ã¯ç§˜å¯†ã€‚
