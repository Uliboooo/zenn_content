---
title: "変数とデータ型、演算"
---

## 変数の宣言と可変性

- `let var-name = value;`で宣言
- デフォルトで**不変**
- `mut`で可変変数を作成
  - 変更可能性を明示する
- 型推論が強いので通常は注釈は不要
- 必要なら`var: type`
- 暗黙的な型変換は行われない
  - ので、i32とu64は加算できない。`as`で明示的に変換する

```rust
let a = 100;
a += 10; // 🚫エラー
^^^^^^^ cannot assign twice to immutable variable

let mut b = 100;
b += 10; // `mut`変数なので書き換え可能

let c: u32 = 10;
let d: i32 = 10;
let e = c + d; // 🚫エラー: cが`u32`でdが`i32`のため型が合わない
          ^ no implementation for `u32 + i32`

let f: u64 = 10;
let g: i32 = 10;
let h = f as i32 + g; // asで`i32`に変換することでi32と加算できる
```

## データ型

### プリミティブ

|      type       |             desc             |                                                  |
| :-------------: | :--------------------------: | :----------------------------------------------: |
|    `i8~i64`     |       8~64bit符号付き        |               通常i32で推論される                |
|    `u8~u64`     |       8~64bit符号なし        |                                                  |
|  `f32`, `f64`   |     32/64bit浮動小数点数     |                高精度のf64が基準                 |
|     `bool`      |          true/false          |                                                  |
|     `char`      | 文字型(ユニコードのスカラ値) |                ""ではなく''で囲む                |
| `&str`/`String` |            文字列            | 前提が多いので一旦`String`と`&str`があることだけ |

- 数字の可読性のために`_`を入れても問題ない e.g. `1_000`
- `0xff`で16進数
- `0o77`で8進数
- `0b1111_0000`で2進数

### タプル型

- 複数の型を単一の値として利用できる
- `let (x,y,z) = tup`でタプルをそれぞれの変数に束縛可能
- `.添字`で値を選択
- ()でそれぞれを一括でbindできる

```rust
let color = (0,256,0);
println!("R:{}\nG:{}\nB:{}", color.0,color.1,color.2);

let x:(i32, u32, u64) = (0, 8, 100);
```

### 配列

- `[elm, elm1, elm2]`で宣言
  - 他の宣言方法は以下
- 固定長で作ったら変更できないのであまり見ない
- 私は基本使ってない

```rust
let array = [0,1,2,3];
let three_x_4 = [3; 4]; // [3, 3, 3, 3]
```

### Vec

- stdで提供される可変配列
- 個人的には配列よりよっぽど見かける
- push()などで値を追加, 削除できる(`mut`なVecの場合)
- 宣言方法は色々あるので以下コード参照

```rust
let v1 = vec![1,2,3,4];  // vec!マクロで初期化
let mut v2 = Vec::new(); // Vec::new()関数で空のVecを生成
v2.push(1); // pushなどで型が推論できれば`Vec::new()`だけでいい
let v3 = Vec::<i32>::new(); // ターボフィッシュ`::<type>::`でnew()に型情報を与えて指定することも可能
```

## 演算

- 四則演算はそのまま`+`, `-`, `*`,`/`を使用
- 剰余は`%`で

```rust
let add = 1 + 2;
let sub = 1 - 2;
let mul = 2 * 2;
let div = 1 / 2;
let modi = 5 % 2;
```
